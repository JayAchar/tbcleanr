<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MSF OCA Standard Indicators workflow â€¢ tbcleanr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="MSF OCA Standard Indicators workflow">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-128985004-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-128985004-1');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tbcleanr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.5.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting-started.html">Getting started</a>
    </li>
    <li>
      <a href="../articles/admission-file-workflow.html">Workflow - admission</a>
    </li>
    <li>
      <a href="../articles/standard-indicators-workflow.html">Workflow - OCA SI</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/JayAchar/tbcleanr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>MSF OCA Standard Indicators workflow</h1>
                        <h4 class="author">Jay Achar</h4>
            
            <h4 class="date">2020-02-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/JayAchar/tbcleanr/blob/master/vignettes/standard-indicators-workflow.Rmd"><code>vignettes/standard-indicators-workflow.Rmd</code></a></small>
      <div class="hidden name"><code>standard-indicators-workflow.Rmd</code></div>

    </div>

    
    
<div id="purpose" class="section level1">
<h1 class="hasAnchor">
<a href="#purpose" class="anchor"></a>Purpose</h1>
<p>A workflow for handling aggregated routine programmatic TB data from MSF OCA projects has been developed and included in the <code>tbcleanr</code> pacakge. Functions have been developed using Standard Indicator files from 2014-2019, so functionality cannot be guaranteed on data outside this date range.</p>
<p>Similar to other workflows in this package, use of the <code>%&gt;%</code> function from the <code>magrittr</code> or <code>dplyr</code> packages is recommended to encourage the development of more human-readable code.</p>
</div>
<div id="functions" class="section level1">
<h1 class="hasAnchor">
<a href="#functions" class="anchor"></a>Functions</h1>
<p><code>tbcleanr</code> includes 1 exported function designed for cleaning Standard Indicator data alongside 2 internal package functions:</p>
<table class="table">
<colgroup>
<col width="40%">
<col width="10%">
<col width="49%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Exported</th>
<th>Use it for</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>clean_standard_indicators()</code></td>
<td>Yes</td>
<td>Single function to clean imported Standard Indicator data object</td>
</tr>
<tr class="even">
<td><code>extract_tb_data()</code></td>
<td>No</td>
<td>Incorporated in <code>clean_standard_indicators()</code> so seperate use not required.</td>
</tr>
<tr class="odd">
<td><code>transpose_tb_data()</code></td>
<td>No</td>
<td>Incorporated in <code>clean_standard_indicators()</code> so seperate use not required.</td>
</tr>
</tbody>
</table>
</div>
<div id="workflow" class="section level1">
<h1 class="hasAnchor">
<a href="#workflow" class="anchor"></a>Workflow</h1>
<div id="import-raw-data" class="section level2">
<h2 class="hasAnchor">
<a href="#import-raw-data" class="anchor"></a>Import raw data</h2>
<p>For ease of use, saving all raw data files in one local folder is recommended. Navigate to this folder using the <code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code> or another approach you are comfortable with. Then import the raw data:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># import data using readxl package</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">raw_file &lt;-<span class="st"> </span>readxl<span class="op">::</span><span class="kw">read_excel</span>(<span class="st">"2014_Standard_Indicators.xlsx"</span>,</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">                               <span class="dt">sheet =</span> <span class="st">"projects compiled"</span>)</a></code></pre></div>
<blockquote>
<p>Ensure the <code>sheet</code> argument in the read_excel() function is filled to represent the full country compiled data</p>
</blockquote>
</div>
<div id="clean-data" class="section level2">
<h2 class="hasAnchor">
<a href="#clean-data" class="anchor"></a>Clean data</h2>
<p>The <code>clean_standard_indicators()</code> takes two arguments. The first is the imported data object - this must be a data frame. The second arugement is a string of length one indicating the year of data collection. In this case, the raw data file was labelled with the year of data collection, so is included in the cleaning step to include this as a variable in the output.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># clean imported data</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">clean_data &lt;-<span class="st"> </span><span class="kw">clean_standard_indicators</span>(<span class="dt">file =</span> raw_file,</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">                                        <span class="dt">year =</span> <span class="st">"2014"</span>)</a></code></pre></div>
<p>Mission and project names are standardised to allow simpler aggregating across years. Output variable names are related to raw data rows and are self-explanatory.</p>
</div>
<div id="multiple-files" class="section level2">
<h2 class="hasAnchor">
<a href="#multiple-files" class="anchor"></a>Multiple files</h2>
<p>To simultaneously import and clean multiple data files the following appraoch could be used:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># define file names</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">files &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"2014_Standard_Indicators.xlsx"</span>, <span class="st">"2015_Standard_Indicators.xlsx"</span>,</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">           <span class="st">"2016_Standard_Indicators.xlsx"</span>, <span class="st">"2017_Standard_Indicators.xlsx"</span>)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co"># define years</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">years &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"2014"</span>, <span class="st">"2015"</span>, <span class="st">"2016"</span>, <span class="st">"2017"</span>)</a>
<a class="sourceLine" id="cb3-7" data-line-number="7"></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co"># use purrr to import and clean in one step</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">data_list &lt;-<span class="st"> </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map2.html">map2</a></span>(<span class="dt">.x =</span> files,</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">            <span class="dt">.y =</span> years, </a>
<a class="sourceLine" id="cb3-11" data-line-number="11">            <span class="dt">.f =</span> <span class="op">~</span><span class="st"> </span>{readxl<span class="op">::</span><span class="kw">read_excel</span>(.x, <span class="dt">sheet =</span> <span class="st">"projects compiled"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="st">                </span><span class="kw">clean_standard_indicators</span>(<span class="dt">year =</span> .y)}) </a>
<a class="sourceLine" id="cb3-13" data-line-number="13"></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co"># use dplyr to convert list to data frame</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15">clean_data &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(data_list)</a></code></pre></div>
</div>
</div>
<div id="further-development" class="section level1">
<h1 class="hasAnchor">
<a href="#further-development" class="anchor"></a>Further development</h1>
<p>Since the Standard Indicator template is unlikely to be used in future years, further development of this component of the <code>tbcleanr</code> package is unlikely. Please contact the developer if you would like to help maintain this package, or develop new features.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#purpose">Purpose</a></li>
      <li><a href="#functions">Functions</a></li>
      <li>
<a href="#workflow">Workflow</a><ul class="nav nav-pills nav-stacked">
<li><a href="#import-raw-data">Import raw data</a></li>
      <li><a href="#clean-data">Clean data</a></li>
      <li><a href="#multiple-files">Multiple files</a></li>
      </ul>
</li>
      <li><a href="#further-development">Further development</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jay Achar.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
